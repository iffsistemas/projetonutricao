<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:h="http://java.sun.com/jsf/html" 
	  xmlns:p="http://primefaces.org/ui">


<ui:composition template="/templates/templates.xhtml"> 


<ui:define name="titulo">Pacientes</ui:define>


<ui:define name="conteudo">
	
		
<h:form id="buscarAtendimento">			
				
		<p:panelGrid align="center" id="tableBuscarAtendimento" columns="3" > 
		
		
		
		
			<p:column><p:outputLabel value="Paciente: " for="nome"/></p:column>
			<p:column><h:inputText id="nome" value="#{pacienteBean.nome}" /></p:column>   
		   		 
	
		<p:column> <p:commandButton action="#{pacienteBean.buscarNome()}" value="Buscar" 
                update=":mensagem :formConsultas:tableConsultas" icon="ui-icon-search" /> </p:column>
		
		
		</p:panelGrid>
</h:form>



<h:form id="formConsultas">
	<p:dataTable value="#{pacienteBean.pacientes}" var="paciente"
	paginator="true" id="tableConsultas"  emptyMessage="Nenhum registro encontrado!" rows="5">
		<p:column sortBy="#{paciente.nome}" filterBy="#{paciente.nome}">
			<f:facet  name="header">Nome do Paciente</f:facet>
			<p:outputLabel value="#{paciente.nome}" />
		</p:column>
		<p:column sortBy="#{paciente.dataNascimento}" >
			<f:facet name="header">Nascimento</f:facet>
			<p:outputLabel value="#{paciente.dataNascimento}">
			<f:convertDateTime pattern="dd/MM/yyyy" />
			</p:outputLabel>
		</p:column>		
		<p:column>
			<f:facet name="header">Ver Atendimentos</f:facet>
			<p:commandButton icon="ui-icon-list-alt" action="#{pacienteBean.carregarAtendimentos()}"
			oncomplete="PF('dialogAtendimentos').show()" value="Atendimentos" update=":mensagem, formConsultas:tableConsultas, formAtendimentos"  process="@form">
				<f:setPropertyActionListener value="#{paciente}" target="#{pacienteBean.pacienteSelecionado}" />
			</p:commandButton>			
						
		</p:column>
		
				
		
	</p:dataTable> 
	
	
	
 </h:form>

	

<br></br><br></br>

<h:form id="formNovoPaciente">

	 <p:fieldset legend="Novo Paciente" id="fieldNovoPaciente">
	 
	 
	 	 <h:panelGrid cellpadding="10" columns="3">
	 	 
	 	 
	 	 <p:column> <p:commandButton value="Adulto"  oncomplete="PF('dialogCadAdulto').show();" /> </p:column>
	 	 
	 	  <p:column> <p:commandButton value="Gestante" oncomplete="PF('dialogCadGestante').show();" /> </p:column>
	 	 
	 	 <p:column> <p:commandButton value="Criança"  oncomplete="PF('dialogCadCrianca').show();" 
	 	 action="#{pacienteBean.limpar()}" update="dialogCrianca" process="@form"/> </p:column>
	 	  
	 		 	 
	 	 </h:panelGrid>
	 
	 
	 </p:fieldset>
</h:form>

                  

<p:dialog  header="Cadastro - Paciente Adulto" widgetVar="dialogCadAdulto" 
draggable="false" resizable="false" modal="true" showEffect="slide" hideEffect="slide"> 




<h:form id="dialogAdulto">
	
	
	<p:tabView >
	
	<p:tab title="Identificação">
	
	 <h:panelGrid columns="2">
             	<p:outputLabel value="Nome" for="nome"/>
                <p:inputText id="nome" value="#{pacienteBean.pacienteAdulto.nome}" required="true" requiredMessage="Nome Obrigatório!"/>
 
                <p:outputLabel value="Data de Nascimento: " for="dataNascimento" />
				<p:calendar locale="pt" id="dataNascimento"
                            value="#{pacienteBean.pacienteAdulto.dataNascimento}" effect="slide"
                            pattern="dd/MM/yyyy" mask="true"/>
                            
                <p:outputLabel value="Teste Idade:" />
                <p:commandButton action="#{pacienteBean.calcularIdade()}" />         
                
                <p:outputLabel value="Idade:" for="idade"/>
                <p:inputText id="idade" value="#{pacienteBean.pacienteAdulto.idade}" />
                
       </h:panelGrid>
                
               <!-- =================Identificação Contatos===================================== --> 
              
                               
                <p:fieldset legend="Contatos" id="fieldContados"> 
               
                <h:panelGrid columns="2">
                 
                 	<p:outputLabel value="Email:" for="email"/>
                	<p:inputText id="email" value="#{pacienteBean.pacienteAdulto.email}" />
                
                	<p:outputLabel value="Tel. Residencial:" for="telefoneRes"/>
                    <p:inputText id="telefoneRes"  value="#{pacienteBean.pacienteAdulto.telefoneRes}" />
                
                    <p:outputLabel value="Celular:" for="telefoneCel"/>
                    <p:inputText id="telefoneCel" value="#{pacienteBean.pacienteAdulto.telefoneCel}" />
                
                 </h:panelGrid>    
                
                </p:fieldset>
                
                 <!-- =======================OCUPAÇÂO============================================= --> 
                 
                 <p:fieldset legend="Ocupação" id="fieldOcupação"> 
               
                <h:panelGrid columns="2">
                 
                 	<p:outputLabel value="Profissão:" for="profissao"/>
                	<p:inputText id="profissao" value="#{pacienteBean.pacienteAdulto.profissão}" />
                	
                                      	
                	                
                 </h:panelGrid>  		 </p:fieldset> 			</p:tab>
                 
                 
               <p:tab title="Motivos">  
               
               
              <h4>Qual o motivo do Atendimento?</h4> 
        
       
    	<p:fieldset legend="Motivos" id="fieldMotivos"> 
   <p:selectManyCheckbox id="teste" value="#{pacienteBean.motivosSelecionados}" layout="responsive" columns="2">
				<f:selectItems value="#{pacienteBean.motivosAtendimento()}" var="motivo" itemLabel="#{motivo.descricao}" itemValue="#{motivo}"/>
			</p:selectManyCheckbox>
			<br />
   
    <h4>Outros Motivos:</h4> 
    <p:inputTextarea value="#{pacienteBean.pacienteAdulto.outrosMotivos}" rows="3" cols="80" counter="display" maxlength="300" counterTemplate="{0} restantes" autoResize="false" />
    <br /><h:outputText id="display" />
      
     	</p:fieldset>  </p:tab>
     	
     	
     	
     	<p:tab title="Saúde">
     	
     	<h:panelGrid columns="2">
     	
     	<p:outputLabel value="Problemas de Saúde:" for="problemasSaude"/>
     	<p:inputTextarea id="problemasSaude" value="#{pacienteBean.pacienteAdulto.problemaDeSaude}"  rows="4" cols="60" autoResize="false" />
     	
     	</h:panelGrid>
     	
     	
     	
     	<p:fieldset>
     	
     	<p:commandButton value="Adicionar Medicamento" icon="ui-icon-plus" oncomplete="PF('AddMedicamento').show();"/>   
     	
     	<p:dataTable style="max-width: 600px; min-width: 600px" value="#{#}" var="med"
	paginator="true" id="tableMedicamentos"  emptyMessage="Nenhum Medicamento Cadastrado!" rows="5">
		<p:column>
			<f:facet name="header">Nome</f:facet>
			<h:outputText value="#{med.nome}" />
		</p:column>
		<p:column>
			<f:facet name="header">Posologia</f:facet>
			<h:outputText value="#{med.umidade}" />
		</p:column>		
		<p:column>
			<f:facet name="header">Ação</f:facet>
			<p:commandButton value="Excluir" icon="ui-icon-trash" />   
		</p:column>	
		</p:dataTable>
		
		
		
		<p:dialog  header="Adicionar Medicamentos" widgetVar="AddMedicamento" 
draggable="false" resizable="false" showEffect="slide" hideEffect="slide">

		<h:panelGrid columns="2">
     	
     	<p:outputLabel value="Nome:" for="nomeMed"/>
     	<p:inputTextarea id="nomeMed" value="#{#}"  rows="2" cols="20" autoResize="false" />
     	
     	<p:outputLabel value="Posologia" for="posologia"/>
     	<p:inputTextarea id="posologia" value="#{#}"  rows="2" cols="20" autoResize="false" />
     	
     	<p:commandButton value="Salvar" icon="ui-icon-disk" action="#{#}"/> 
     	
		

		</h:panelGrid>

		</p:dialog>
     	       	
     	
     	</p:fieldset>
     	
     	
     	
     	
     	</p:tab>  
               
               
               
               
               
                	
	
	
	
	
	</p:tabView>

     
 <p:commandButton actionListener="#{pacienteBean.salvarPacienteAdulto()}" value="Salvar" 
                update=":mensagem :formConsultas:tableConsultas  :dialogAdulto" 
                process="@form" oncomplete="PF('dialogCadAdulto').hide();" /> 
                
                <p:commandButton value="Fechar" oncomplete="PF('dialogCadAdulto').hide();" />                  
       
</h:form>
</p:dialog>




<!-- =================Dialog Gestante===================================== --> 





<p:dialog  header="Cadastro - Paciente Gestante" widgetVar="dialogCadGestante" 
draggable="false" resizable="false" modal="true" showEffect="slide" hideEffect="slide"> 

<h:form id="dialogGestante">
	
	
	
     
        <h:panelGrid id="tableIdentificacao" columns="2">
             	<p:outputLabel value="Nome" for="nome"/>
                <p:inputText id="nome" value="#{pacienteBean.pacienteGestante.nome}" required="true" requiredMessage="Nome Obrigatório!"/>
 
                <p:outputLabel value="Data de Nascimento: " for="dataNascimento" />
				<p:calendar locale="pt" id="dataNascimento"
                            value="#{pacienteBean.pacienteGestante.dataNascimento}" effect="slide"
                            pattern="dd/MM/yyyy" mask="true"/>
                
                <p:outputLabel value="Idade:" for="idade"/>
                <p:inputText id="idade" value="#{pacienteBean.pacienteGestante.idade}" />
                
       </h:panelGrid>
                
               <!-- =================Identificação Contatos===================================== --> 
              
                               
                <p:fieldset legend="Contatos" id="fieldContados"> 
               
                <h:panelGrid columns="2">
                 
                 	<p:outputLabel value="Email:" for="email"/>
                	<p:inputText id="email" value="#{pacienteBean.pacienteGestante.email}" />
                
                	<p:outputLabel value="Tel. Residencial:" for="telefoneRes"/>
                    <p:inputText id="telefoneRes"  value="#{pacienteBean.pacienteGestante.telefoneRes}" />
                
                    <p:outputLabel value="Celular:" for="telefoneCel"/>
                    <p:inputText id="telefoneCel" value="#{pacienteBean.pacienteGestante.telefoneCel}" />
                
                 </h:panelGrid>    
                
                </p:fieldset>
                
                 <!-- =======================OCUPAÇÂO============================================= --> 
                 
                 <p:fieldset legend="Ocupação" id="fieldOcupação"> 
               
                <h:panelGrid columns="2">
                 
                 	<p:outputLabel value="Profissão:" for="profissao"/>
                	<p:inputText id="profissao" value="#{pacienteBean.pacienteGestante.profissão}" />
                	
                	
                
              <p:commandButton actionListener="#{pacienteBean.salvarPacienteGestante()}" value="Salvar" 
                update=":mensagem :formConsultas:tableConsultas :dialogGestante:tableIdentificacao" 
                process="@form" oncomplete="PF('dialogCadGestante').hide();" /> 
                
                <p:commandButton value="Fechar" oncomplete="PF('dialogCadGestante').hide();" />               	
                	                
                 </h:panelGrid>    
                
                </p:fieldset>
</h:form>
</p:dialog>


<!-- =======================DIALOG CRIANCA============================================= --> 


<p:dialog  header="Cadastro - Paciente Criança" widgetVar="dialogCadCrianca"
draggable="false" resizable="false" modal="true" showEffect="slide" hideEffect="slide"> 

<h:form id="dialogCrianca">
	
	
	
     
        <h:panelGrid id="tableIdentificacao" columns="2">
             	<p:outputLabel value="Nome" for="nome"/>
                <p:inputText id="nome" value="#{pacienteBean.pacienteCrianca.nome}" required="true" requiredMessage="Nome Obrigatório!"/>
 
                <p:outputLabel value="Data de Nascimento: " for="dataNascimento" />
				<p:calendar locale="pt" id="dataNascimento"
                            value="#{pacienteBean.pacienteCrianca.dataNascimento}" effect="slide"
                            pattern="dd/MM/yyyy" mask="true"/>
                
                <p:outputLabel value="Idade:" for="idade"/>
                <p:inputText id="idade" value="#{pacienteBean.pacienteCrianca.idade}" />
                
       </h:panelGrid>
                
               <!-- =================Identificação Contatos===================================== --> 
              
                               
                <p:fieldset legend="Contatos" id="fieldContados"> 
               
                <h:panelGrid columns="2">
                 
                 	<p:outputLabel value="Email:" for="email"/>
                	<p:inputText id="email" value="#{pacienteBean.pacienteCrianca.email}" />
                
                	<p:outputLabel value="Tel. Residencial:" for="telefoneRes"/>
                    <p:inputText id="telefoneRes"  value="#{pacienteBean.pacienteCrianca.telefoneRes}" />
                
                    <p:outputLabel value="Celular:" for="telefoneCel"/>
                    <p:inputText id="telefoneCel" value="#{pacienteBean.pacienteCrianca.telefoneCel}" />
                
                 </h:panelGrid>    
                
                </p:fieldset>
                
                 <!-- =======================OCUPAÇÂO============================================= --> 
                 
                              
                <p:fieldset legend="Escolaridade" id="fieldEscolaridade"> 
               
                
                
                <h:panelGrid columns="2">
                 
			         <h:outputText value="Frequenta Escola/Creche" />
			        <!--  <p:selectBooleanCheckbox value="#{pacienteBean.pacienteCrianca.escolaridade}" /> -->
			        <p:selectBooleanButton value="#{pacienteBean.pacienteCrianca.escolaridade}" onLabel="SIM" offLabel="NÂO" onIcon="ui-icon-check" offIcon="ui-icon-close"/>
			             
			       			                 
			          <h:outputText value="Período: " for="periodo"/>
			          <p:inputText id="periodo" value="#{pacienteBean.pacienteCrianca.periodo}" />
			                
			                    
			                         	
                
              <p:commandButton actionListener="#{pacienteBean.salvarPacienteCrianca()}" value="Salvar" 
                update=":mensagem :formConsultas:tableConsultas :dialogCrianca:tableIdentificacao" 
                process="@form" oncomplete="PF('dialogCadCrianca').hide();"/> 
                
                <p:commandButton value="Fechar" oncomplete="PF('dialogCadCrianca').hide();" />               	
                	                
                 </h:panelGrid>    
                
                </p:fieldset>
</h:form>
</p:dialog>




<!-- ======================= Botao Atendimentos============================================= --> 


<p:dialog  header="Atendimentos" widgetVar="dialogAtendimentos" 
draggable="false" resizable="false" modal="true" showEffect="slide" hideEffect="slide"> 

<h:form id="formAtendimentos">
	<p:dataTable style="max-width: 550px; min-width: 550px" value="#{pacienteBean.atendimentos}" var="atend"
		paginator="true" id="tableAtendimentos"  emptyMessage="Nenhum Atendimento Cadastrado!" rows="5">
		
			
		<p:column>
			<f:facet name="header">Dt. Atendimento</f:facet>
			<h:outputText value="#{atend.dataAtendimento}" >
			<f:convertDateTime pattern="dd/MM/yyyy" />
			</h:outputText>
		</p:column>
		<p:column>
			<f:facet name="header">Descrição</f:facet>
			<h:outputText value="#{atend.descricao}" />
		</p:column>		
			
		
		
	</p:dataTable> 
	
	<p:column>				 
		 <p:commandButton value="Novo Atendimento" action="#{pacienteBean.chamarAtendimento()}" ajax="false"/>
	</p:column>
</h:form>




</p:dialog>









  
</ui:define>	 
</ui:composition>







	






 
</html>
